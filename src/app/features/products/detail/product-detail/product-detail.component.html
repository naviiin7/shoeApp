<!-- src/app/features/products/detail/product-detail/product-detail.component.html -->
<div class="max-w-6xl mx-auto p-6">
  <div *ngIf="loading" class="text-center py-12">Loading…</div>

  <!-- guard product with ngIf so templates can't access undefined -->
  <ng-container *ngIf="product as p">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="md:col-span-1">
        <img
          [src]="p.image || defaultImage"
          [alt]="p.name"
          class="w-full h-[520px] object-contain rounded-lg"
          (error)="onImgError($event)"
        />
      </div>

      <div class="md:col-span-2">
        <h1 class="text-3xl font-bold mb-3">{{ p.name }}</h1>
        <div class="text-2xl text-sky-600 font-bold mb-4">${{ p.price }}</div>
        <p class="text-gray-600 mb-6">{{ p.description || 'No description yet.' }}</p>

        <!-- sizes, add to cart, etc. — safe access -->
        <div *ngIf="p.sizes?.length">
          <label class="block text-sm mb-2">Sizes</label>
          <div class="flex gap-2 mb-4">
            <button *ngFor="let s of p.sizes" class="border px-3 py-1 rounded">{{ s }}</button>
          </div>
        </div>

        <div class="flex gap-3">
          <button class="bg-sky-600 text-white px-4 py-2 rounded">Add to cart</button>
          <button class="border px-4 py-2 rounded">Buy now</button>
        </div>
      </div>
    </div>
  </ng-container>
</div>
