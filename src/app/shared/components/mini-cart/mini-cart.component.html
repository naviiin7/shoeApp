<div class="mini-cart-panel" *ngIf="open">
  <div class="mini-cart-header">
    <h3>Cart</h3>
    <button (click)="close()">✕</button>
  </div>

  <div *ngIf="items.length === 0" class="empty-cart">
    Your cart is empty
    <div class="mt-3">
      <a routerLink="/shop" (click)="close()" class="empty-cart-link">Browse products</a>
    </div>
  </div>

  <div *ngIf="items.length > 0" class="mini-cart-items">

    <div *ngFor="let it of items" class="mini-cart-item">
      <img [src]="it.product?.image || 'assets/images/placeholder.png'" class="item-img" />

      <div class="item-info">
        <div class="item-name">{{ it.product?.name }}</div>
        <div class="item-qty">Qty: {{ it.qty }}</div>
      </div>

      <div class="item-price">
        ${{ ((it.product?.price ?? 0) * it.qty) | number:'1.2-2' }}
      </div>
    </div>

    <div class="mini-cart-total">
      <span>Total</span>
      <span class="total-amount">
        ${{ getTotal() | number:'1.2-2' }}
      </span>
    </div>

    <div class="mini-cart-actions">
      <button class="btn-checkout" (click)="checkoutFromMiniCart()" [disabled]="submitting">
        {{ submitting ? 'Processing…' : 'Checkout' }}
      </button>

      <a routerLink="/cart" (click)="close()" class="btn-open-cart">Open cart</a>
    </div>

  </div>
</div>
