<!-- Mini Cart Overlay -->
<div
  *ngIf="visible"
  class="fixed inset-0 z-[999] flex justify-end bg-black/50 backdrop-blur-sm"
  @fadeInOut
  (click)="close()"
>
  <!-- Slide-out Cart -->
  <aside
    class="relative bg-white w-96 max-w-full h-full shadow-2xl p-6 flex flex-col z-[1000]"
    (click)="$event.stopPropagation()"
    @slideInOut
  >
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-lg font-semibold">Your Cart ({{ items.length }})</h3>
      <button (click)="close()" class="text-gray-400 hover:text-gray-600 text-2xl font-bold">&times;</button>
    </div>

    <div *ngIf="items.length === 0" class="text-gray-500 text-center py-20">
      Your cart is empty.
    </div>

    <div *ngIf="items.length > 0" class="flex-1 overflow-y-auto space-y-4 pr-2">
      <div *ngFor="let it of items" class="flex items-center gap-4 border-b pb-3">
        <img [src]="it.product.image" alt="" class="w-16 h-16 object-cover rounded" />
        <div class="flex-1">
          <div class="font-semibold text-sm">{{ it.product.name }}</div>
          <div class="text-xs text-gray-500">${{ it.product.price }}</div>
          <div class="flex items-center gap-2 mt-1">
            <button (click)="decrease(it)" class="px-2 border rounded hover:bg-gray-100">âˆ’</button>
            <span>{{ it.qty }}</span>
            <button (click)="increase(it)" class="px-2 border rounded hover:bg-gray-100">+</button>
          </div>
        </div>
        <button (click)="remove(it)" class="text-xs text-red-500 hover:underline">Remove</button>
      </div>
    </div>

    <div *ngIf="items.length > 0" class="border-t pt-4 mt-4">
      <div class="flex justify-between font-medium mb-3">
        <span>Subtotal</span>
        <span>${{ subtotal | number: '1.2-2' }}</span>
      </div>
      <div class="flex gap-2">
        <button
        (click)="checkout()"
        class="bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300"
      >
        Checkout
      </button>
        <button
           (click)="continue()"
           class="bg-sky-500 text-white px-4 py-2 rounded-md hover:bg-sky-600"
        >
        Continue
        </button>
      </div>
    </div>
  </aside>
</div>
